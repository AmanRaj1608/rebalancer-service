ðŸ”” Current Balances:
Ethereum Chain (0x0197d7FaFCA118Bc91f6854B9A2ceea94E676585): 923.05923 USDT
Threshold: 20 USDT
Mantle Chain (0x0197d7FaFCA118Bc91f6854B9A2ceea94E676585): 29.338091 USDC
Threshold: 35 USDC


now how much to rebalance
total amount = sum of all balances - sum of all thresholds = 923.05923 + 29.338091 - 20 - 35 = 897.397321
imbalance = total / 2 = 897.397321 / 2 = 448.6986605


yarn run v1.22.22
warning ../../../package.json: No license field
$ ts-node-dev --respawn --transpile-only src/main.ts
[INFO] 02:10:15 ts-node-dev ver. 2.0.0 (using ts-node ver. 10.9.2, typescript ver. 5.7.2)
[INFO] 2024-12-23T22:10:15.447Z - Initializing application...
[INFO] 2024-12-23T22:10:15.449Z - Application starting...
[INFO] 2024-12-23T22:10:15.451Z - Initializing chain clients...
[INFO] 2024-12-23T22:10:16.002Z - Bot info retrieved: @test_rebalance_bot
[INFO] 2024-12-23T22:10:16.005Z - Bot marked as initialized
[INFO] 2024-12-23T22:10:16.005Z - Testing bot connection...
[INFO] 2024-12-23T22:10:16.526Z - Bot connection test successful: @test_rebalance_bot
[INFO] 2024-12-23T22:10:16.526Z - Bot start sequence completed
[INFO] 2024-12-23T22:10:16.526Z - Attempting to send info message
[INFO] 2024-12-23T22:10:16.539Z - Bot @test_rebalance_bot started successfully in webhook
[INFO] 2024-12-23T22:10:16.873Z - Info message sent successfully
[INFO] 2024-12-23T22:10:16.874Z - Attempting to send info message
[INFO] 2024-12-23T22:10:17.245Z - Info message sent successfully
[INFO] 2024-12-23T22:10:18.514Z - Attempting to send info message
[INFO] 2024-12-23T22:10:18.888Z - Info message sent successfully
ethereumThresholdUsd 848.8193904899146
mantleThresholdUsd 39.99976818237559
ethereumBalanceUsd 921.7771446996351
mantleBalanceUsd 29.33792097283599
ethereumThresholdUsd 848.8193904899146
mantleThresholdUsd 39.99976818237559
imbalanceToMoveUSD 31.147953500090438
[INFO] 2024-12-23T22:10:22.085Z - Attempting to send info message
[INFO] 2024-12-23T22:10:22.467Z - Info message sent successfully
[INFO] 2024-12-23T22:10:22.740Z - Bridge tokens with params:
      tokenAddress: 0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9
      amount: 31191276
      direction: MAINNET_TO_MANTLE
    
[INFO] 2024-12-23T22:10:22.740Z - Initiating bridge transaction:
        Direction: MAINNET_TO_MANTLE
        Amount: 31191276
        Source Token: 0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9
        Destination Token: 0x09Bc4E0D864854c6aFB6eB9A9cdF58aC190D0dF9
      
[INFO] 2024-12-23T22:10:22.741Z - Requesting bridge quote with params:
        fromChainId: 42161
        toChainId: 5000
        fromTokenAddress: 0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9
        toTokenAddress: 0x09Bc4E0D864854c6aFB6eB9A9cdF58aC190D0dF9
        fromAmount: 31191276
        userAddress: 0x0197d7FaFCA118Bc91f6854B9A2ceea94E676585
      
quote {
  route: {
    routeId: '0bacfbc8-bbc4-41d3-91f7-d8a09d2df707',
    isOnlySwapRoute: false,
    fromAmount: '31191276',
    toAmount: '30544008',
    usedBridgeNames: [ 'symbiosis' ],
    minimumGasBalances: { '5000': '1800000000000000', '42161': '2800000000000000' },
    chainGasBalances: { '5000': [Object], '42161': [Object] },
    totalUserTx: 1,
    sender: '0x0197d7FaFCA118Bc91f6854B9A2ceea94E676585',
    recipient: '0x0197d7FaFCA118Bc91f6854B9A2ceea94E676585',
    totalGasFeesInUsd: 0.059836379832,
    receivedValueInUsd: 30.481723620168,
    inputValueInUsd: 31.18909,
    outputValueInUsd: 30.54156,
    userTxs: [ [Object] ],
    serviceTime: 60,
    maxServiceTime: 7200,
    integratorFee: { amount: '0', asset: [Object] },
    extraData: { rewards: [] }
  },
  approvalData: {
    spender: '0x3a23F943181408EAC424116Af7b7790c94Cb97a5',
    amount: 31191276n
  },
  txData: '0x000001965258a6c1000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000009e40000000000000000000000000197d7fafca118bc91f6854b9a2ceea94e676585000000000000000000000000000000000000000000000000000000000000138800000000000000000000000000000000000000000000000000000000000004800000000000000000000000000000000000000000000000000000000000000384ee8f0b86000000000000000000000000fd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000001dbf0ec00000000000000000000000000000000000000000000000000000000000009e400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000002a812aa3caf000000000000000000000000e37e799d5077682fa0a244d46e5649f71457bd09000000000000000000000000fd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee000000000000000000000000e37e799d5077682fa0a244d46e5649f71457bd090000000000000000000000003a23f943181408eac424116af7b7790c94cb97a50000000000000000000000000000000000000000000000000000000001dbf0ec000000000000000000000000000000000000000000000000002005fd160aaafb000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001090000000000000000000000000000000000000000eb0000d500008b00004f02a0000000000000000000000000000000000000000000000000002005fd160aaafbee63c1e5007cccba38e2d959fe135e79aebb57ccb27b128358fd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9410182af49447d8a07e3bd95bd0d56f35241523fbab100042e1a7d4d000000000000000000000000000000000000000000000000000000000000000000a0f2fa6b66eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee000000000000000000000000000000000000000000000000002058cbece3fcdf000000000000000000053184fc117618c0611111111254eeb25477b68fb85ed929f73a960582000000000000000000000000000000000000000000000041caa3f8000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000002400000000000000000000000006352a56caadc4f1e25cd6c75970fa768a3304e64000000000000000000000000cb28fbe3e9c0fea62e0e63ff3f232cecfe555ad4000000000000000000000000000000000000000000000000002058cbece3fcdf000000000000000000000000000000000000000000000000000000000000000100000000000000000000000001a3c8e513b758ebb011f7afaf6c37616c9c24d900000000000000000000000000000000000000000000000000000000000002a000000000000000000000000000000000000000000000000000000000000000c4bc80f1a8000000000000000000000000f7e96217347667064dee8f20db747b1c7df45dde000000000000000000000000000000000000000000000000002058cbece3fcdf0000000000000000000000000000000000000000000000000000000001cf6c7a000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000014000fa0000000000000000006f38e884725a116c9c7fbf208e79fe8828a2595f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000af88d065e77c8cc2239327c5edb3a432268e583100000000000000000000000000000000000000000000000000000000000007e4ce654c17000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000493e00000000000000000000000000000000000000000000000000000000001db4e71000000000000000000000000af88d065e77c8cc2239327c5edb3a432268e58310000000000000000000000000197d7fafca118bc91f6854b9a2ceea94e676585000000000000000000000000b8f275fbf7a959f4bce59999a2ef122a099e81a80000000000000000000000005523985926aa12ba58dc5ad00ddca99678d7227e0000000000000000000000000197d7fafca118bc91f6854b9a2ceea94e676585000000000000000000000000000000000000000000000000000000000000dbe00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000cb28fbe3e9c0fea62e0e63ff3f232cecfe555ad40000000000000000000000000000000000000000000000000000000000000260000000000000000000000000b8f275fbf7a959f4bce59999a2ef122a099e81a8000000000000000000000000000000000000000000000000000000000000058000000000000000000000000000000000000000000000000000000000000000640000000000000000000000000197d7fafca118bc91f6854b9a2ceea94e676585736f636b65742d696f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000eeae2132f2e21f68d862c535d7d9857803fbcf3f00000000000000000000000085ec8da79bd2e54724ab8aa4a7a209b1f66d6ec000000000000000000000000000000000000000000000000000000000000002e41e859a050000000000000000000000000000000000000000000000000000000001db4e7100000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000000000002a00000000000000000000000002cbabd7329b84e2c0a317702410e7c73d0e0246d0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000c48f6bdeaa000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000001d6ba910000000000000000000000000000000000000000000000000000000001c894ee000000000000000000000000cb28fbe3e9c0fea62e0e63ff3f232cecfe555ad40000000000000000000000000000000000000000000000000000000067731a530000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000006148fd6c649866596c3d8a971fc313e5ece848820000000000000000000000000000000000000000000000000000000000000002000000000000000000000000eeae2132f2e21f68d862c535d7d9857803fbcf3f00000000000000000000000085ec8da79bd2e54724ab8aa4a7a209b1f66d6ec000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000064000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000204e66bb550000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000493e00000000000000000000000000000000000000000000000000000000001d6a46800000000000000000000000000000000000000000000000000000000000000000000000000000000000000002cbabd7329b84e2c0a317702410e7c73d0e0246d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000085ec8da79bd2e54724ab8aa4a7a209b1f66d6ec000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000197d7fafca118bc91f6854b9a2ceea94e676585000000000000000000000000292fc50e4eb66c3f6514b9e402dbc25961824d620000000000000000000000005523985926aa12ba58dc5ad00ddca99678d7227e0000000000000000000000000197d7fafca118bc91f6854b9a2ceea94e6765850000000000000000000000000000000000000000000000000000000000001388736f636b65742d696f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
  txTarget: '0x3a23F943181408EAC424116Af7b7790c94Cb97a5',
  value: 0n
}
[INFO] 2024-12-23T22:10:28.563Z - Constructing transaction:
          to: 0x3a23F943181408EAC424116Af7b7790c94Cb97a5
          value: 0
          has data: yes
          approval needed: yes
        
[INFO] 2024-12-23T22:10:28.563Z - Estimating gas for transaction:
        to: 0x3a23F943181408EAC424116Af7b7790c94Cb97a5
        value: 0
        chain: ethereum
[INFO] 2024-12-23T22:39:09.265Z - Attempting to send info message
[INFO] 2024-12-23T22:39:09.614Z - Info message sent successfully
[INFO] 2024-12-23T22:39:09.615Z - Execute rebalancing for operation 27187875-47f6-41bf-a016-57523daa0755: 0xdf4d2c652aacab3992a837934c149b020e66531b7b0b2dd5bbe0abfc7f6c7d6e
[INFO] 2024-12-23T22:39:09.615Z - Rebalancing operation started
